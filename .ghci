import Text.Show.Pretty (ppShow, pPrint)
:seti -XOverloadedStrings -XFlexibleContexts
:set -interactive-print pPrint

:def r! const (pure (unlines [ ":!./repl.sh reload", "::r", ":!tput bel" ]))
:def reload! const (pure (unlines [ ":!./repl.sh reload", "::r", ":!tput bel" ]))

:def test \x -> pure $ ":!stack test --fast " ++ concat [ " --test-arguments '-p " ++ x ++ "'" | x /= "" ]
:def test! const (pure ":!stack test --fast --test-arguments '-r'")

:def compile \x -> pure $ ":main compile " ++ x
:def repl \x -> pure $ ":main repl " ++ x
